% Chapitre sur le rapport d ingenierie :


\chapter{Rapport d'ingénierie} 


\TODO {ADD definitions to glossary !!!!}









\section{Introduction}

Ce PFE conclut les cinq années d'étude a l'INSA de Lyon. Il s'agit de démontrer des capacités d'adaptation, d'innovation et d'initiative propres a un ingénieur. Les laboratoires aux États-Unis ont besoin de l'expertise d'ingénieurs pour résoudre des problème techniques. Notamment, au Megason Lab, ce sont principalement des ingénieurs qui développent le programme de visualisation de données. Les problèmes d'acquisitions d'images biologiques révèlent aussi des défis techniques.
 
\section{Objectifs}





\section{Création d'un debugger graphique}

L'équipe d'informaticiens au Megason Lab est divisée en deux : deux ingénieurs travaillent sous la direction d'un docteur sur la création de l'outil de visualisation d'images microscopiques (GoFigure2), tandis qu'un autre docteur travaille sur des algorithmes de traitement d'image. Afin de travailler pour l'ensemble des informaticiens, le projet devait
\begin{inparaenum}[(i)]
  \item faciliter le travail de developpement d'algorithmes de traitement de l'image, et 
  \item s'integrer au developpement de GofiGure2.
\end{inparaenum}

La création d'un debugger graphique atteint ces deux buts : Il s'agit d'un programme utilisant le code source du projet Gofigure2, qui sera utilise pour le developpement des plugins de Gofigure2.
Ce programme permet aussi de visualiser les traitements appliques aux données lors de l'execution d'un algorithme de traitement d'image sous un environnement de debugging

\subsection{les outils utilises}

\subsubsection{Les librairies \C++}

Il existe un grand nombre de fonctions déjà codées en {\C++}. Dans une optique de standardisation et d'efficacité, il est important d'apprendre a utiliser des librairies contenant les fonctions utiles au programme que l'on crée.

\paragraph{La librairie "Insight ToolKit" (ITK)} est un projet open source initialement destiné au recalage et a la segmentation d'images medicales. ITK a été programmée en \C++ , en utilisant des techniques de codage avancées (templates, modification de la syntaxe standard et ajout de fonctionnalités au langage \C++ par le biais d'idiomes) , ainsi que l'outil de développement cross-platform CMake, et communautaires (SVN, puis GIT). 
Cette collection d'algorithmes ne cesse de s'agrandir grâce à la philosophie open-source. Le spectre des applications d'ITK inclut entre autres exemples:  
\begin{itemize}
  \item l'imagerie medicale, avec \href{http://www.slicer.org/}{3DSlicer},
  \item l'imagerie biologique, avec \href{http://gofigure2.sourceforge.net/}{Gofigure2},
  \item et l'imagerie satellite, avec l'\href{http://www.orfeo-toolbox.org/otb/}{Orfeo ToolBox}.
\end{itemize}
Le modèle de programmation est relativement complexe et nécessite de un long apprentissage, et de l'expérience. A cette fin, de nombreux outils d'information sont mis a la disponibilité du nouvel utilisateur :
\begin{itemize}
  \item des listes de diffusions d'Emails, pour mettre en contact les nouveaux utilisateurs d'ITK et les programmeurs et utilisateurs avancés;
  \item un wiki (\url{http://www.vtk.org/Wiki/ITK}), qui donne quelques informations quand à la mise en place d'un environnement de développement utilisant ITK.;
  \item un guide d'utilisateur très bien expliqué, mais basé sur la version 2.4 d'ITK tandis que la dernière version publiée est la 3.20;
    \TODO {reference ITK software guide}
  \item la documentation Doxygen présentée sous forme de site internet, est directement compilée a partir du code source. Elle est donc plus ou moins complète selon les fichiers. Afin de pouvoir naviguer dans cette dernière, il est indispensable de connaitre la structure du projet.
\end{itemize}
Luis Ibáñez, a dit cette année : "La courbe d'apprentissage d'ITK en \C++ est bien trop raide, et nous allons nous efforcer dans les futures version, de rendre la librairie plus accessible.". La prochaine version d'ITK (version 4) sera donc surement plus facile a utiliser et prendre en main.

\paragraph{La librairie VTK} est développée par Kitware, Il s'agit d'une librairie \C++ utilisee pour la visualisation de données. Elle est open source et cross-platform. Elle utilise des outils similaires a ceux utilises pour ITK (CMake)
Elle utilise aussi un systeme de "pipeline" (flux de donnees) similaire a celui d'ITK pour traiter les donnees a visualiser. Elle est developpee conjointement avec ITK, et il est possible plus ou moins facilement de connecter les filtres de traitement d'image d'ITK avec les filtres de visualisation de VTK.

\paragraph{La librairie Qt} permet une gestion avancée et multi plateforme de l'interface utilisateur, en proposant une interface graphique open source et cross-platform.
Elle étend aussi les fonctionnalités du langage \C++ en proposant une nouvelle architecture pour le système de callbacks, un nouveau modèle d'objet, et d'héritage. Cependant, ces modifications sont facilement intégrées par le développeur débutant, grâce a une aide abondante composée d'un ensemble de tutoriels, d'exemples fortement documentes, et d'une liste de diffusion très active.


\TODO{DEFINIR CALLBACK, GUI}

\subsubsection{Les outils de programmation}

A partir d'un certain niveau, en {\C++}, il est indispensable de maitriser certains outils complexes. Ceux-la, après un long apprentissage, augmentent grandement la productivité.

\paragraph{Unix Shell}
La plupart des informaticiens travaillent sur Linux, car ce système inclut un grand nombre d'utilitaires standard pour un développement en {\C++}. Les outils de contrôle de version (SVN, GIT), les outils de connexion réseau (ssh), des compilateurs pour les principaux langages sont installes par défaut sur la plupart des distributions Linux.
Afin de pouvoir bénéficier au maximum de ce système, il est important de maitriser l'invite de commande.

\paragraph{CMake: Make multi-plateforme}
Au Megason Lab, nous utilisons CMake, ce programme permet definir des regles de compilation permettant a un projet de compiler sur differents systemes d'exploitation (Nous programmons des application fonctionnant sur Windows, Linux et MacOs).

\paragraph{CTest: Un utilitaire de contrôle de qualité}
Lorsque l'on travaille sur un projet volumineux, il est facile de "casser" le code. L'ajout de certaines fonctionnalités peut modifier le comportement d'autres parties du programme d'une manière imprévue. L'outil CTest est utilisé au Kegason Lab, pour tester la fiabilité du code. Ce programme télécharge régulièrement le code source, le compile, et effectue une batterie de test des fonctionnalités du programme.

\paragraph{svn: Le contrôle de version pour un travail collaboratif}
Gofigure2 est developpe par un groupe d'informaticiens. Ces derniers travaillent sur les meme fichiers simultanement. Dans ce cadre, il est important de garder une trace des modifications apportees par chacun. Il faut aussi combiner ces changements, et sauvegarder le projet sur un serveur accessible a tous. svn est un utilitaire qui remplis toutes ces fonctions.




\TODO{definir SVN GIT}


\subsection{AGENDA ?????}



\subsection{resultats}

\TODO {include screenshots include code snapshots}
\subsection{travail futur}





\section{Amélioration des techniques d'imagerie}


acquisitions :
belles
artifacts, bruits
deplacements violents

remedier a ce probleme


Il est aussi important de noter qu'acquérir une image de qualité facilite grandement le travail de reconnaissance de formes et d'objets, en réduisant les près-traitements.

\subsection{Stabilisation de l'acquisition}

\subsubsection{Principe}


\subsubsection{Code}

demarche : evaluation de la metrique
optimisation tps calcul
developpement en visualbasic (windows emule)

\subsubsection{Tests et travaux futurs}
test sur objet inanime
test sur poisson en developpement
developpements futurs :
metrique non rigide ?
tps de calcul ?
wavelets pour downsample ?


\section{Définition de protocoles}

Une partie de mon travail a consiste en la définition de protocoles afin d'effectuer certaines taches d'une manière organisée et répétable. Il s'agit d'un travail de recherche, d'apprentissage et d'expression. J'ai travaille sur l'élaboration d'un workflow pour l'équipe de programmateurs, et une méthode de partage de données avec d'autres laboratoires, pour l'ensemble du laboratoire.

\subsection{GIT workflow}

GIT est un programme très a la mode, de nombreux projets open source l'utilisent pour la gestion de leur code. Comme Gofigure2 adopte une philosophie open source, il se doit d'utiliser les outils favoris de la communauté.
Je suis donc passé par une phase d'apprentissage pour ensuite écrire un tutoriel afin d'expliquer le fonctionnement de GIT a l'équipe informatique. J'ai ensuite propose un workflow, qui est celui utilise par les développeurs du projet VTK.

\subsubsection{Fonctionnement de GIT}

GIT est un programme de gestion de sources invente par le créateur de Linux  (Linus Torvalds). Ce programme de contrôle de version est utilisé pour le développement du noyau de Linux, il est donc très performant, mais aussi très complexe.
Le principe du programme de contrôle de version est de permettre a plusieurs développeurs de travailler sur un même projet. Le programme gardant en mémoire qui a apporté telle modification au code, et quand. Cela permet a chaque programmeur de travailler sur des fonctionnalités différentes et de fusionner leurs changements.
Le code source est souvent stocké sur un serveur en ligne. GIT fait une copie de l'historique du code source sur l'ordinateur de l'utilisateur. Il est donc possible de réarranger cet historique, d'ajouter des modifications, sans etre connecte a internet, une fois le projet copie ("clone" dans le langage de GIT) sans être connecte a internet. L'utilisateur peut, des qu'il bénéficie d'une connexion internet partager ("pousser") tous les changements qu'il a apporte au code source, en une seule fois. En ce sens, GIT diffère d'une partie des logiciels concurrent qui nécessitent une connexion internet presque permanente.


\subsubsection{Écriture du tutoriel}

Le tutoriel a été écris sur le wiki de Gofigure2. Il s'agit de l'emplacement de prédilection pour les informations concernant la programmation et l'utilisation de Gofigure2. Le système du wiki, en plus de proposer une syntaxe simple pour créer des pages web formatées, permet aux lecteurs autorisés de modifier le contenu. Il existe aussi un système de feedback permettant aux lecteurs ayant mal compris le contenu, de contacter l'auteur.

L'écriture d'un tel tutoriel se fait souvent dans un registre proche du langage familier, le but étant de simuler des instruction données par un collègue ou un ami. Les instruction se doivent d'être relativement brèves, bien souvent le lecteur veut juste appliquer certaines fonctionnalités proposées par GIT sans toujours vraiment chercher a comprendre ce qu'il fait. Il existe d'autres sources d'informations pour apprendre complètement le fonctionnement de l'application.
Le tutoriel ne se veut donc pas exhaustif, il propose juste une manière qui fonctionne d'utiliser GIT, a la manière d'un travail dirigé. Il a été écrit pendant ma phase d'apprentissage de GIT. Il détaille les principales difficultés et écueils rencontrés. 

Le tutoriel est présent a cette adresse : \\
\url{}

\subsubsection{Workflow propose}
Il a enfin fallu proposer un workflow (protocole de travail), qui définit la manière dont les programmateurs doivent apporter des modifications au code source. Il s'agit de proposer un protocole qui :
\begin{enumerate}
  \item n'augmente pas trop la charge de travail,
  \item permette de bien suivre les modifications apportes par chacun. 
  \item permette au responsable du projet de corriger ou supprimer les changements apportes par les développeurs.
  \item corresponde a un standard.
\end{enumerate}
Le workflow propose a été détaillé par \href{http://nvie.com/about }{Vincent Driessen} sur son \href{http://nvie.com/git-model}{blog}. Ce protocole découle assez naturellement de l'apprentissage de GIT, il est donc simple.

Ce workflow, en plus d'etre precisement detaille, est techniquement viable :
Les travaux et modifications de chacun sont stockés dans des branches annexes durant tout leur développement. Il est ainsi facile de corriger un bug introduit par une certaine fonction. La branche principale (master) contient en permanence une version stable du projet.
Le serveur central (en ligne) contient deux branches :
\begin{description}
  \item [master] qui contient la version courante stable du projet,
  \item [develop] qui contient les nouvelles fonctionnalités depuis la dernière version stable du projet. Cette branche est celle dont on teste la robustesse.
\end{description}
Les informations les plus importantes du projet sont donc sauvegardes sur le cerveur central en plus de sur toutes les machines utilisées par les programmeurs. 


\subsubsection{Planning et avancement}













\section{Projet professionnel}

Ce PFE s'inscrit dans un projet professionnel construit durant ma scolarité a l'INSA de Lyon.
Mon inscription a l'INSa de Lyon a été grandement motivée par l'ouverture de l'école a l'international. J'ai ainsi effectue mon stage ouvrier en Afrique du Sud. Profitant d'une première expérience professionnelle a l'international.

Lors de ma seconde année a l'INSA de Lyon, j'ai choisi l'option SCiences et ANglais (SCAN). Cette filière regroupe les élèves ayant un niveau suffisant pour pouvoir suivre la formation généraliste en anglais. Elle s'accompagne d'une bourse pour un bref séjour linguistique dans une université étrangère. J'ai profite de ce financement pour aller au Trinity College en Irelande ou j'ai pu avoir ma première expérience académique a l'étranger.

J'ai ensuite choisi le département Génie Électrique qui permet de bénéficier d'un grand panel de compétences, notamment dans des domaines rattaches a l'électronique et l'informatique.

Continuant l'expérience internationale, j'ai effectué mon stage industriel au Fraunhofer Institute, Center for Manufacturing Innovation, aux États Unis. Ce stage m'a énormément apporte en plus de l'expérience technique. Il s'agissait d'une première immersion dans la culture américaine. C'est après ce stage que j'ai passe le test TOEIC validant un très bon niveau d'expression et de compréhension en anglais, avec un score de neuf cent quatre-vingt sur neuf cent quatre-vingt dix.

Le PFE au Megason lab possède des attraits indéniables : il s'agit d'un stage de recherche perfectionnant mes connaissances en traitement de l'image. Il s'agit aussi d'une expérience internationale dans une université renommée : Harvard Medical School. Ainsi, en plus de prendre plaisir a travailler en recherche, j'ouvre la porte a de nombreuses opportunités professionnelles.

Comme je suis intéressé par les domaines techniques, je compte profiter de l'opportunité de poursuivre mes études pour obtenir un doctorat en mathématiques appliquées, au cours d'une thèse élaborée en collaboration avec le laboratoire CREATIS (INSA Lyon) et le laboratoire Megason (Harvard Medical School). Cette incroyable opportunité professionnelle est financée en partie par Harvard Medical School et en partie par l'INSA de Lyon. Je passerai ainsi la moitié de mon temps en France, et l'autre moitie aux États Unis.
En plus de pouvoir travailler sur un domaine passionnant, je pourrai ainsi bénéficier d'une équivalence avec un PhD () (diplôme très reconnu a l'international). 

Je compte ensuite mettre en valeur ma capacité a travailler dans un contexte international, dans des domaine a haute technicité pour travailler dans le secteur privé. Je pourrai mettre en avant mes capacités en traitement du signal pour travailler dans le médical ou l'aéronautique.

Mon ambition est de migrer vers des responsabilités manageriales après avoir une très bonne maitrise de la technique.


\TODO{
definir Templates
definir cross platform
definir idiomes \C++
definir SVN
definir GIT
definir wiki
definir GUI Graphical User Interface
definir Callback}
